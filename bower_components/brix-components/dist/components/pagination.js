!function(t,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("jquery"),require("underscore"),require("brix/loader"),require("components/base"),require("brix/event")):"function"==typeof define&&define.amd?define(["jquery","underscore","brix/loader","components/base","brix/event"],i):"object"==typeof exports?exports["components/pagination"]=i(require("jquery"),require("underscore"),require("brix/loader"),require("components/base"),require("brix/event")):t["components/pagination"]=i(t.jquery,t.underscore,t["brix/loader"],t["components/base"],t["brix/event"])}(this,function(t,i,s,e,n){return function(t){function i(e){if(s[e])return s[e].exports;var n=s[e]={exports:{},id:e,loaded:!1};return t[e].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}var s={};return i.m=t,i.c=s,i.p="",i(0)}([function(t,i,s){t.exports=s(1)},function(t,i,s){var e,n;e=[s(2),s(3),s(4),s(5),s(6),s(7),s(8)],n=function(t,i,s,e,n,o,a){function r(){}var h=[10,20,30,40,50];return i.extend(r.prototype,e.prototype,{options:{statistics:!0,simplify:!1,step:7,total:0,cursor:1,limit:10,limits:void 0},init:function(){this.options.limits=this.options.limits&&this.options.limits.length?i.unique(this.options.limits):[].concat(h),this._state=new o(this.options.total,this.options.cursor,this.options.limit)},render:function(){var e=this;this.$manager=new n("bx-"),this.$element=t(this.element),this.data=this._fixData();var o=i.template(a)(this.data);t(this.element).empty().append(o),this.$manager.delegate(this.element,this),s.boot(this.element,function(){e.dropdown=s.query("components/dropdown",e.element)[0],e.dropdown&&e.dropdown.on("change.dropdown",function(t,i){t.stopPropagation(),e._state.setCursor(1),e._state.setLimit(i.value),e.trigger("change.pagination",e._state),e._update()})})},_update:function(){this.data=this._fixData();var s=i.template(a)(this.data),e=t(s);this.$element.find("ul.pagination").replaceWith(e.find("ul.pagination")),this.$element.find("span.start-end-total").replaceWith(e.find("span.start-end-total"))},moveTo:function(t,i){1===arguments.length&&(i=t),this._state.moveTo(i),this.trigger("change.pagination",this._state),this._update()},total:function(t){return void 0===t||null===t?this._state.total:(this._state.total!==t&&(this._state.setTotal(t),this._update()),this)},cursor:function(t){return void 0===t||null===t?this._state.cursor:(this._state.cursor!==t&&(this._state.setCursor(t),this._update()),this)},limit:function(t){return void 0===t||null===t?this._state.limit:(this._state.limit!==t&&(this._state.setLimit(t),this._update()),this)},_fixData:function(){var t=Math.min(this._state.pages,Math.max(1,this._state.cursor-parseInt(this.options.step/2,10))),s=+this.options.limit,e=[].concat(this.options.limits).sort(function(t,i){return t-i});if(!i.contains(e,s))switch(!0){case s<e[0]:e.unshift(s);break;case s>e[e.length-1]:e.push(s);break;default:for(var n=0;n<e.length;n++)if(s<e[n]){e.splice(n,0,s);break}}return i.extend({barStart:t,barEnd:Math.min(this._state.pages,t+this.options.step-1),limits:e,simplify:this.options.simplify},this._state)},destroy:function(){this.$manager.undelegate(this.$element,this)}}),r}.apply(i,e),!(void 0!==n&&(t.exports=n))},function(i,s){i.exports=t},function(t,s){t.exports=i},function(t,i){t.exports=s},function(t,i){t.exports=e},function(t,i){t.exports=n},function(t,i,s){var e;e=function(){return function(i){function s(t,i,s){this.data="number"==typeof t||"string"==typeof t?void 0:t,this.total=this.data?this.data.length:parseInt(t,10),this.cursor=parseInt(i,10),this.limit=parseInt(s,10),this.calc()}return s.prototype={calc:function(){return this.total&&parseInt(this.total,10)>0?(this.limit=this.limit<1?1:this.limit,this.pages=this.total%this.limit===0?this.total/this.limit:this.total/this.limit+1,this.pages=parseInt(this.pages,10),this.cursor=this.cursor>this.pages?this.pages:this.cursor,this.cursor=this.cursor<1?this.pages>0?1:0:this.cursor,this.start=(this.cursor-1)*this.limit,this.start=this.start<0?0:this.start,this.end=this.start+this.limit>this.total?this.total:this.start+this.limit,this.end=this.total<this.limit?this.total:this.end,this.hasPrev=this.cursor>1,this.hasNext=this.cursor<this.pages,this.hasFirst=this.hasPrev,this.hasLast=this.hasNext,this.prev=this.hasPrev?this.cursor-1:0,this.next=this.hasNext?this.cursor+1:0,this.first=this.hasFirst?1:0,this.last=this.hasLast?this.pages:0,this.focus=this.focus?this.focus:0,this.focus=this.focus%this.limit+this.start,this.focus=this.focus>this.end-1?this.end-1:this.focus):(this.pages=this.cursor=this.start=this.end=0,this.hasPrev=this.hasNext=this.hasFirst=this.hasLast=!1,this.prev=this.next=this.first=this.last=0,this.focus=0),this},moveTo:function(t){return this.cursor=parseInt(t,10),this.calc()},moveToPrev:function(){return this.moveTo(this.cursor-1)},moveToNext:function(){return this.moveTo(this.cursor+1)},moveToFirst:function(){return this.moveTo(1)},moveToLast:function(){return this.moveTo(this.pages)},fetch:function(t){return(t||this.data).slice(this.start,this.end)},setData:function(t){return this.data=t,this.total=t.length,this.calc()},setTotal:function(t){return this.total=parseInt(t,10),this.calc()},setCursor:function(t){return this.cursor=parseInt(t,10),this.calc()},setFocus:function(t){return this.focus=parseInt(t,10),this.focus<0&&(this.focus+=this.total),this.focus>=this.total&&(this.focus-=this.total),this.cursor=parseInt(this.focus/this.limit,10)+1,this.calc()},setLimit:function(t){return this.limit=parseInt(t,10),this.calc()},get:function(t){return void 0!==t?this.data[t%this.data.length]:this.data[this.focus]},toString:function(){return JSON.stringify(this,null,4)}},s.prototype.to=s.prototype.moveTo,s.prototype.toPrev=s.prototype.moveToPrev,s.prototype.toNext=s.prototype.moveToNext,s.prototype.toFirst=s.prototype.moveToFirst,s.prototype.toLast=s.prototype.moveToLast,"undefined"!=typeof t&&t.exports?t.exports=s:i.State=s,s}(this)}.call(i,s,i,t),!(void 0!==e&&(t.exports=e))},function(t,i,s){var e;e=function(){return'<div class="row paginationwrapper">\n    <% if(simplify) { %>\n        <div class="col-md-12" style="text-align: right;">\n            <ul class="pagination" style="text-align: right;">\n                <li class="<%= hasPrev ? \'\' : \'disabled\' %>"><a href="javascript: void(0);" bx-click="moveTo(<%=prev%>)"><span class="brixfont">&#xe601;</span></a></li><!-- Previous -->\n\n                <li class="pagination-statistics-simplify"><span><%= cursor %>/<%= pages %></span></li>\n                \n                <li class="<%= hasNext ? \'\' : \'disabled\' %>"><a href="javascript: void(0);" bx-click="moveTo(<%=next%>)"><span class="brixfont">&#xe600;</span></a></li><!-- Next -->\n            </ul>\n        </div>\n    <% } else { %>\n\n    <div class="pagination-statistics col-md-6">\n        <span class="start-end-total">当前第 <b><%= start + 1 %> - <%= end %></b> 条，共 <b><%= total %></b> 条</span><span>，每页展现</span>\n        <select bx-name="components/dropdown">\n            <% for( var i = 0; i < limits.length; i++ ) { %>\n            <option value="<%= limits[i] %>" <%= limits[i] == limit ? \'selected\' : \'\' %>><%=limits[i]%></option>\n            <% } %>\n        </select>\n        <span>条</span>\n    </div>\n    <div class="col-md-6" style="text-align: right;">\n        <ul class="pagination">\n\n            <li class="<%= hasPrev ? \'\' : \'disabled\' %>"><a href="javascript: void(0);" bx-click="moveTo(<%=prev%>)"><span class="brixfont">&#xe601;</span></a></li><!-- Previous -->\n\n            <% if( barStart == 2 ) { %>\n                <li><a class="page" href="javascript: void(0);" bx-click="moveTo(1)">1</a></li>\n            <% } %>\n\n            <% if( barStart >= 3 ) { %>\n                <li><a href="javascript: void(0);" bx-click="moveTo(1)">1</a></li>\n                <li><a href="javascript: void(0);" bx-click="moveTo(2)">2</a></li>\n                <% if( barStart > 3 ) { %>\n                    <li class="disabled"><a href="javascript: void(0);">...</a></li>\n                <% } %>\n            <% } %>\n\n            <% for( var i = barStart; i <= barEnd; i++ ) { %>\n                <% if( i === cursor ) { %>\n                    <li class="active"><a href="javascript: void(0);"><%= i %></a></li>\n                <% } else { %>\n                    <li><a href="javascript: void(0);" bx-click="moveTo(<%=i%>)"><%= i %></a></li>\n                <% } %>\n            <% } %>\n\n            <% if( barEnd < pages - 1) { %>\n                <li class="disabled"><a href="javascript: void(0);">...</a></li>\n            <% } %>\n\n            <% if( barEnd < pages) { %>\n                <li><a href="javascript: void(0);" bx-click="moveTo(<%=pages%>)"><%= pages %></a></li>\n            <% } %>\n\n            <li class="<%= hasNext ? \'\' : \'disabled\' %>"><a href="javascript: void(0);" bx-click="moveTo(<%=next%>)"><span class="brixfont">&#xe600;</span></a></li><!-- Next -->\n\n            <!-- <li>\n                <select bx-name="components/dropdown">\n                    <% for( var i = 1; i <= pages; i++ ) { %>\n                        <option value="<%= i %>" <%= i == cursor ? \'selected\' : \'\' %>><%= i %></option>\n                    <% } %>\n                </select>\n            </li> -->\n        </ul>\n    </div>\n\n    <% } %>\n</div>'}.call(i,s,i,t),!(void 0!==e&&(t.exports=e))}])});
//# sourceMappingURL=pagination.js.map
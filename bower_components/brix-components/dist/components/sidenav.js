!function(a,i){"object"==typeof exports&&"object"==typeof module?module.exports=i(require("jquery"),require("underscore"),require("handlebars"),require("components/base"),require("brix/event")):"function"==typeof define&&define.amd?define(["jquery","underscore","handlebars","components/base","brix/event"],i):"object"==typeof exports?exports["components/sidenav"]=i(require("jquery"),require("underscore"),require("handlebars"),require("components/base"),require("brix/event")):a["components/sidenav"]=i(a.jquery,a.underscore,a.handlebars,a["components/base"],a["brix/event"])}(this,function(a,i,e,n,t){return function(a){function i(n){if(e[n])return e[n].exports;var t=e[n]={exports:{},id:n,loaded:!1};return a[n].call(t.exports,t,t.exports,i),t.loaded=!0,t.exports}var e={};return i.m=a,i.c=e,i.p="",i(0)}([function(a,i,e){a.exports=e(1)},function(a,i,e){var n,t;n=[e(2),e(3),e(4),e(5),e(6)],t=function(a,i,e,n,t){function s(){arguments.length&&(this.element=a(arguments[0]),this.options=i.extend(this.options,arguments[1]),this.render())}var r="swing",o={EVENTS:{".sub-nav":{mouseenter:function(i,e){a(e.element).find(".side-hold span").hasClass("on")||e._expandCollapseSubNav()},mouseleave:function(i,e){a(e.element).find(".side-hold span").hasClass("on")||e._expandCollapseSubNav()}},".side-hold span":{click:function(i,e){var n=a(i.currentTarget);n.toggleClass("on"),n.hasClass("on")?e.main.animate({marginLeft:200},e.duration,r,function(){e.trigger("slideEnd",1),e.isFullSubNav="1",e.localStorage.isFullSubNav="1"}):e.main.animate({marginLeft:40},e.duration,r,function(){e.trigger("slideEnd",0),e.isFullSubNav="0",e.localStorage.isFullSubNav="0"})}},".sub-nav .sub-link":{click:function(a,i){return}},".sub-nav .sub-title":{click:function(a,i){return}},".sub-nav .sub":{mouseenter:function(a,i){return}}},DOCEVENTS:{".sub-nav-view a":{click:function(a,i){}},".sub-nav-view":{mouseleave:function(a,i){}}},WINEVENTS:{scroll:function(i,e){e._timer(function(){e._fixedStatic()},10);var n=e.sidebar.find(".sidebar");n.hasClass("sidebar-fixed")?n.css({left:-a(window).scrollLeft()}):n.css({left:0})},resize:function(i,e){e.subNav.height(a(window).height())},hashchange:function(a,i){i._pathname2sidebar()}}};return i.extend(s.prototype,n.prototype,{options:{inmain:".inmain",index:"/index",duration:250,pathMap:{}},render:function(){var i=this,e=a(this.element);this.sidebar=e,this.main=a(this.options.inmain),this.allLinks=e.find(".sidebar").find("a"),this.nav=e.find(".top-nav"),this.subNav=e.find(".sub-nav"),this.subNavWrap=e.find(".sub-nav-wrap"),this.subNavHandle=e.find(".subnav-handle"),this.pathMap=this.options.pathMap,this.sidebar.find(".sidebar").find("[data-sub]").hide(),this.localStorage=window.localStorage||{},this.isFullSubNav=this.localStorage.isFullSubNav||this.options.expand||"1",this.isExpandNav="1"===this.isFullSubNav,this.index=this.options.index,this.duration=this.options.duration,this.isHandleClick=!1,i.navTop=e.find(".sidebar").offset().top,this._pathname2sidebar(),this.subNav.height(a(window).height()),this._bindUI()},_bindUI:function(){var i=a(this.element),e=this;a.each(o,function(n,t){switch(n){case"EVENTS":a.each(t,function(n,t){a.each(t,function(a,t){i.delegate(n,a,function(a){t(a,e)})})});break;case"DOCEVENTS":a.each(t,function(i,n){a.each(n,function(n,t){a(document).delegate(i,n,function(a){t(a,e)})})});break;case"WINEVENTS":a.each(t,function(i,n){a(window).bind(i,function(a){n(a,e)})})}})},_getPathname:function(a){var i;if(a.indexOf("#!")>-1)var e=/^.*(#!\/[^\?]+)\??.*$/.exec(a);else var e=/^(\/[^\?]+)\??.*$/.exec(a);return i=e&&e[1]||"",i=i.replace("#!","")},_pathname2sidebar:function(){var i=this,e=this._getPathname(location.hash)||this._getPathname(this.index);a.each(this.pathMap,function(a,i){if(e===a)return e=i,!1});var n=!1,t=Array.prototype.slice,s=i.subNav.find("a");s=s.filter(function(i,e){var n=a(e).closest("[data-notmenu]");if(!n||0===n.length)return e});var r=i.nav.find("a"),o=t.call(r).concat(t.call(s));return a.each(o,function(t,s){s=a(s);var r=s.attr("href");return r=r.replace(/^.*?#/g,"#"),r=i._getPathname(r),""!==e&&(r===e?(i.navclick(s,e),n=!0,!1):void 0)}),n&&""!==e?void(this.isNavClick=!1):void i._setNoSelectedNav()},_setNoSelectedNav:function(){this.sidebar.find(".sidebar").find("a").removeClass("on"),this.nav.find("a").removeClass("on"),this._collapseNav(null,function(){})},navclick:function(i,e,n,t){var s=this;e=e||this._getPathname(location.hash);var r,o=!1;if(t)this.nav.find("a").each(function(n,t){t=a(t),r=t.attr("href"),r=r.slice(r.indexOf("#")),r=s._getPathname(r),r===e&&(o=!0,i=t)});else{var u=!1,d=this.subNav.find("a");d=d.filter(function(i,e){var n=a(e).closest("[data-notmenu]");if(!n||0===n.length)return e}),d.each(function(n,t){if(t=a(t),r=t.attr("href"),r=r.slice(r.indexOf("#")),r=s._getPathname(r),r===e)return u=!0,i=t,!1}),u||this.nav.find("a").each(function(n,t){t=a(t),r=t.attr("href"),r=r.slice(r.indexOf("#")),r=s._getPathname(r),r===e&&(o=!0,i=t)})}if(o)s._expandCollapseNav(i);else{var h=i.parents("[data-sub]");if(!h)return;var l=this.nav.find("[data-sub="+h.attr("data-sub")+"]");s._expandCollapseNav(l);var c=s.subNav.find("a").filter(function(i,e){var n=a(e).closest("[data-notmenu]");if(!n||0===n.length)return e});c.removeClass("on"),c.each(function(i,n){if(n=a(n),s._getPathname(n.attr("href").replace(/^.*?#/g,"#"))===e)return n.addClass("on"),!1})}s.isHandleClick=!1,s.nowNav=i,s.isNavClick=!0},_fixedStatic:function(i){var e=this,n=a(document).scrollTop(),t=n>e.navTop;t?e.sidebar.find(".sidebar").addClass("sidebar-fixed"):e.sidebar.find(".sidebar").removeClass("sidebar-fixed")},_timer:function(a,i){clearTimeout(this.itv),this.itv=setTimeout(a,i)},_setSubNavOn:function(a){if(this.subNav.find("a, .icon-font").removeClass("on"),a){var i=a.closest(".sub-nav-third");a.addClass("on"),"0"===this.isFullSubNav&&i&&i.prev().addClass("on")}},_expandCollapseNav:function(i){var e,n=this,t=i.attr("data-sub"),s=i.attr("href");if(s=s.slice(s.indexOf("#")),t){var r=n.currentNav;n.currentNav&&n.currentNav.hide(),n.currentNav=n.subNav.find('[data-sub="'+t+'"]'),n.currentNav.find("a").each(function(i,n){n=a(n);var t=n.attr("href");if(t.slice(t.indexOf("#"))===s)return e=n,!1}),n.currentSubNav=e,n._setSubNavOn(e),(n.sidebar.find(".sidebar .side-hold span").hasClass("on")||r.html()===n.currentNav.html())&&n.currentNav.show(),n._expandNav()}else n._collapseNav();n.nav.find("a").removeClass("on"),i.addClass("on")},_switchTrigger:function(){"1"===this.isFullSubNav?this.subNavHandle.removeClass("icon-collapse").addClass(".icon-expand"):"0"===this.isFullSubNav&&this.subNavHandle.removeClass("icon-expand").addClass(".icon-collapse")},_expandCollapseSubNav:function(){var i=this,e=i.currentSubNav,n=e&&("LI"===e.prop("nodeName")?e.find("ul"):e.closest("ul")),t=n&&n.hasClass("sub-nav-third");i.isExpandNav?(i.isExpandNav=!1,i._collapseSubNav(function(){i._switchTrigger(),a(i.element).find(".side-hold").hide()}),t&&n.prev()&&n.prev().addClass("on"),a(".menu-icon").show(),a(".menu-btn").hide()):(i.isExpandNav=!0,i._expandSubNav(),i._switchTrigger(),t&&n.prev()&&n.prev().removeClass("on"),a(".menu-icon").hide(),a(".menu-btn").show(),a(i.element).find(".side-hold").show())},_collapseSubNav:function(a){var i=this;this.subNav.animate({width:"40px"},this.duration,r,a),this.main.animate({marginLeft:"40px"},this.duration,r,function(){i.currentNav.hide()}),this._collapseThirdNav()},_expandSubNav:function(a){var i=this;this.subNav.animate({width:"200px"},this.duration,r,a),i.currentNav.show(),this._expandThirdNav()},_expandThirdNav:function(i){var e=this;if(e.nowNav){var n=e.nowNav.attr("data-sub");!n||n===e.currentNav.attr("data-sub")&&!e.isHandleClick?e.sidebar.find(".sidebar").find(".sub-nav-third").css("height","auto"):e.sidebar.find(".sidebar").find(".sub-nav-third").each(function(n,t){t=a(t);var s=t.css("height","auto").height();t.css("height",0),t.animate({height:s},e.duration,r,i)})}},_collapseThirdNav:function(a){var i=this;i.sidebar.find(".sidebar").find(".sub-nav-third").animate({height:0},this.duration,r,a)},_expandNav:function(i,e){"1"!==this.isFullSubNav&&(this.currentNav.hide(),a(this.element).find(".side-hold span").removeClass("on"),a(".menu-icon").show()),this.subNav.show(),this.subNav.animate({width:"1"===this.isFullSubNav?"200px":"40px"},this.duration,r,e),this.subNavWrap.animate({marginLeft:"0"},this.duration,r,e);var n=a(this.element).find(".side-hold span").hasClass("on"),t=n?200:40;200===this.subNav.width()&&(t=200),this.main.animate({marginLeft:t},this.duration,r),"1"===this.isFullSubNav?this._expandThirdNav():this._collapseThirdNav()},_collapseNav:function(a,i){var e=this;this.subNav.animate({width:"1px"},this.duration,r,function(){e.subNav.hide()}),this.subNavWrap.animate({marginLeft:"1"===this.isFullSubNav?"-200px":"-40px"},this.duration,r,i),this.main.animate({marginLeft:"0"},this.duration,r)}}),s}.apply(i,n),!(void 0!==t&&(a.exports=t))},function(i,e){i.exports=a},function(a,e){a.exports=i},function(a,i){a.exports=e},function(a,i){a.exports=n},function(a,i){a.exports=t}])});
//# sourceMappingURL=sidenav.js.map
!function(e,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("jquery"),require("underscore")):"function"==typeof define&&define.amd?define(["jquery","underscore"],n):"object"==typeof exports?exports["components/table/linkage"]=n(require("jquery"),require("underscore")):e["components/table/linkage"]=n(e.jquery,e.underscore)}(this,function(e,n){return function(e){function n(r){if(t[r])return t[r].exports;var a=t[r]={exports:{},id:r,loaded:!1};return e[r].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}var t={};return n.m=e,n.c=t,n.p="",n(0)}([function(e,n,t){e.exports=t(1)},function(e,n,t){var r,a;r=[t(2),t(3)],a=function(e,n){function t(n,o){var p=e(n),d="["+u+"],["+f+"]";return r(p,d),e(n).on("change.linkage",d,function(r){if(r.target===r.currentTarget){var u=e(r.currentTarget);a(u,p),i(u,p),c(u,p),o&&o(r,t.val(n),r.currentTarget)}}),t}function r(t,r){var a=t.find(r);n.each(a,function(n){var t=e(n);t.attr(u),t.attr(f)})}function a(t,r){var i=t.attr(u),c=t.attr(f);if(c&&i!==c){var o=r.find(n.template(p)({name:c}));if(o.length){var l=r.find(n.template(d)({name:c}));if(l.length){var h=l.filter(":checkbox"),v=[];n.each(h,function(e){v.push(!e.indeterminate&&e.checked)});var m=e(n.filter(h,function(e){return e.indeterminate})),s=l.filter(":radio"),k=n.uniq(n.map(s,function(n){return e(n).attr("name")})),g=[];n.each(k,function(e){e&&g.push(!!s.filter('[name="'+e+'"]:checked').length)});var x=n.uniq(v.concat(g));o.prop("indeterminate",!!m.length||2===x.length).prop("checked",!m.length&&(1===x.length&&x[0])),a(o,r)}}}}function i(t,r){var a=t.attr(u),c=t.attr(f),o=t.prop("checked");if(a&&a!==c){var p=r.find(n.template(d)({name:a}));if(p.length){var l=p.not(":disabled");if(l.length){var h=l.filter(":checkbox");h.prop("checked",o);var v=l.filter(":radio");if(o||v.prop("checked",o),o){var m=n.uniq(n.map(v,function(n){return e(n).attr("name")}));n.each(m,function(t){if(t){var r=v.filter('[name="'+t+'"]');if(r.length){var a=n.map(r,function(n){return e(n).prop("checked")});n.indexOf(a,o)===-1&&r.eq(0).prop("checked",o)}}})}n.each(p,function(n){i(e(n),r)})}}}}function c(t,r){if(t.is(":radio")){var c=t.attr("name"),o=r.find('[name="'+c+'"]').not(t);n.each(o,function(n){var t=e(n);a(t,r),i(t,r)})}}var o="data-linkage-",u=o+"name",f=o+"parent-name",p="["+u+'="<%= name %>"]',d="["+f+'="<%= name %>"]';return t.off=function(n){var r=e(n),a="["+u+"],["+f+"]";return r.off("click.linkage",a),t},t.val=function(r,c){var o=e(r);if(c){var u=o.find("input:checkbox, input:radio").not(":disabled").prop("checked",!1);return n.each(c,function(t){var r=u.filter('[value="'+t+'"]').prop("checked",!0);n.each(r,function(n){a(e(n),o),i(e(n),o)})}),t}c=[];var f=o.find("input:checkbox:checked, input:radio:checked");return n.each(f,function(n){var t=e(n).attr("value");void 0!==t&&""!==t&&c.push(t)}),c},t}.apply(n,r),!(void 0!==a&&(e.exports=a))},function(n,t){n.exports=e},function(e,t){e.exports=n}])});
//# sourceMappingURL=linkage.js.map
{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///components/table/linkage.js","webpack:///webpack/bootstrap 3584a03505c230c8c71b","webpack:///./src/table/linkage/index.js","webpack:///./src/table/linkage/linkage.js","webpack:///external \"jquery\"","webpack:///external \"underscore\""],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","$","_","linkage","container","callback","$container","selector","ATTR_NAME","ATTR_PARENT_NAME","_valid","on","event","target","currentTarget","$currentTarget","_parent","_children","_siblings","val","$all","find","each","item","$item","attr","$target","name","parentName","$parent","template","ATTR_NAME_VALUE","length","$siblings","ATTR_PARENT_NAME_VALUE","$checkboxSiblings","filter","checkboxSiblingsStates","push","indeterminate","checked","$indeterminateSiblings","$radioSiblings","radioSiblingsNames","uniq","map","radioSiblingsStates","siblingsStates","concat","prop","$children","$enabledChildren","not","$checkboxChildren","$radioChildren","radioNames","$radioSameNameChildren","radioSameNameChildrenStates","indexOf","eq","is","siblings","PREFIX","off","values","checkboxs","value","undefined","apply"],"mappings":"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","file":"components/table/linkage.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"underscore\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\", \"underscore\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"components/table/linkage\"] = factory(require(\"jquery\"), require(\"underscore\"));\n\telse\n\t\troot[\"components/table/linkage\"] = factory(root[\"jquery\"], root[\"underscore\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"underscore\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\", \"underscore\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"components/table/linkage\"] = factory(require(\"jquery\"), require(\"underscore\"));\n\telse\n\t\troot[\"components/table/linkage\"] = factory(root[\"jquery\"], root[\"underscore\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1)\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global define, console  */\n\t/*\n\t    TODO\n\t        \n\t */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t        __webpack_require__(2), __webpack_require__(3)\n\t    ], __WEBPACK_AMD_DEFINE_RESULT__ = function(\n\t        $, _\n\t    ) {\n\t\n\t        var PREFIX = 'data-linkage-'\n\t        var ATTR_NAME = PREFIX + 'name'\n\t        var ATTR_PARENT_NAME = PREFIX + 'parent-name'\n\t        var ATTR_NAME_VALUE = '[' + ATTR_NAME + '=\"<%= name %>\"]'\n\t        var ATTR_PARENT_NAME_VALUE = '[' + ATTR_PARENT_NAME + '=\"<%= name %>\"]'\n\t\n\t        function linkage(container, callback) {\n\t            var $container = $(container)\n\t            var selector = '[' + ATTR_NAME + '],[' + ATTR_PARENT_NAME + ']'\n\t\n\t            _valid($container, selector)\n\t\n\t            $(container).on('change.linkage', selector, function(event) {\n\t                if (event.target !== event.currentTarget) return\n\t                var $currentTarget = $(event.currentTarget)\n\t                _parent($currentTarget, $container)\n\t                _children($currentTarget, $container)\n\t                _siblings($currentTarget, $container)\n\t\n\t                // _indeterminate($container)\n\t\n\t                if (callback) callback(event, linkage.val(container), event.currentTarget)\n\t            })\n\t\n\t            // _indeterminate($container)\n\t\n\t            return linkage\n\t        }\n\t\n\t        linkage.off = function(container) {\n\t            var $container = $(container)\n\t            var selector = '[' + ATTR_NAME + '],[' + ATTR_PARENT_NAME + ']'\n\t            $container.off('click.linkage', selector)\n\t\n\t            return linkage\n\t        }\n\t\n\t        linkage.val = function(container, values) {\n\t            var $container = $(container)\n\t\n\t            // linkage.val(container, values)\n\t            if (values) {\n\t                var checkboxs = $container.find('input:checkbox, input:radio')\n\t                    .not(':disabled')\n\t                    .prop('checked', false)\n\t                _.each(values, function(item /*, index*/ ) {\n\t                    var $target = checkboxs.filter('[value=\"' + item + '\"]').prop('checked', true)\n\t                    _.each($target, function(item /*, index*/ ) {\n\t                        _parent($(item), $container)\n\t                        _children($(item), $container)\n\t                    })\n\t                })\n\t                return linkage\n\t            }\n\t\n\t            // linkage.val(container)\n\t            values = []\n\t            var checked = $container.find('input:checkbox:checked, input:radio:checked')\n\t            _.each(checked, function(item /*, index*/ ) {\n\t                var value = $(item).attr('value')\n\t                if (value !== undefined && value !== '') values.push(value)\n\t            })\n\t            return values\n\t        }\n\t\n\t        function _valid($container, selector) {\n\t            var $all = $container.find(selector)\n\t            _.each($all, function(item /*, index*/ ) {\n\t                var $item = $(item)\n\t                var name = $item.attr(ATTR_NAME)\n\t                var parentName = $item.attr(ATTR_PARENT_NAME)\n\t                if (name === parentName) {\n\t                    console.warn(\n\t                        new Error(\n\t                            _.template(\n\t                                '<%= a %> and <%= b %> have save value \"<%= value %>\", may cause the Linkage to recursive search. You should avoid this kind of code.'\n\t                            )({\n\t                                a: ATTR_NAME,\n\t                                b: ATTR_PARENT_NAME,\n\t                                value: name\n\t                            })\n\t                        ).stack\n\t                    )\n\t                    console.warn(item)\n\t                }\n\t            })\n\t        }\n\t\n\t        function _parent($target, $container) {\n\t            var name = $target.attr(ATTR_NAME)\n\t            var parentName = $target.attr(ATTR_PARENT_NAME)\n\t\n\t            if (!parentName) return\n\t            if (name === parentName) return\n\t\n\t            var $parent = $container.find(\n\t                _.template(ATTR_NAME_VALUE)({\n\t                    name: parentName\n\t                })\n\t            )\n\t            if (!$parent.length) return\n\t\n\t            var $siblings = $container.find(\n\t                _.template(ATTR_PARENT_NAME_VALUE)({\n\t                    name: parentName\n\t                })\n\t            )\n\t            if (!$siblings.length) return\n\t\n\t            // 复选框\n\t            var $checkboxSiblings = $siblings.filter(':checkbox')\n\t            var checkboxSiblingsStates = []\n\t            _.each($checkboxSiblings, function(item /*, index*/ ) {\n\t                checkboxSiblingsStates.push(\n\t                    item.indeterminate ? false : item.checked\n\t                )\n\t            })\n\t\n\t            // 复选框 半选\n\t            var $indeterminateSiblings = $(\n\t                _.filter($checkboxSiblings, function(item /*, index*/ ) {\n\t                    return item.indeterminate\n\t                })\n\t            )\n\t\n\t            // 单选框\n\t            var $radioSiblings = $siblings.filter(':radio')\n\t            var radioSiblingsNames = _.uniq(\n\t                _.map($radioSiblings, function(item /*, index*/ ) {\n\t                    return $(item).attr('name')\n\t                })\n\t            )\n\t            var radioSiblingsStates = []\n\t            _.each(radioSiblingsNames, function(name /*, index*/ ) {\n\t                if (!name) return\n\t                radioSiblingsStates.push(!!\n\t                    $radioSiblings.filter('[name=\"' + name + '\"]:checked').length\n\t                )\n\t            })\n\t\n\t\n\t            var siblingsStates = _.uniq(\n\t                checkboxSiblingsStates.concat(radioSiblingsStates)\n\t            )\n\t            $parent\n\t                .prop(\n\t                    'indeterminate',\n\t                    $indeterminateSiblings.length ? true :\n\t                    siblingsStates.length === 2 // [ true, false ]\n\t                )\n\t                .prop(\n\t                    'checked',\n\t                    $indeterminateSiblings.length ? false :\n\t                    siblingsStates.length === 1 && siblingsStates[0]\n\t                )\n\t\n\t            _parent($parent, $container)\n\t        }\n\t\n\t        function _children($target, $container) {\n\t            var name = $target.attr(ATTR_NAME)\n\t            var parentName = $target.attr(ATTR_PARENT_NAME)\n\t            var checked = $target.prop('checked')\n\t\n\t            if (!name) return\n\t            if (name === parentName) return\n\t\n\t            var $children = $container.find(\n\t                _.template(ATTR_PARENT_NAME_VALUE)({\n\t                    name: name\n\t                })\n\t            )\n\t            if (!$children.length) return\n\t\n\t            var $enabledChildren = $children.not(':disabled')\n\t            if (!$enabledChildren.length) return\n\t\n\t            var $checkboxChildren = $enabledChildren.filter(':checkbox')\n\t            $checkboxChildren.prop('checked', checked)\n\t\n\t            var $radioChildren = $enabledChildren.filter(':radio')\n\t            if (!checked) $radioChildren.prop('checked', checked)\n\t\n\t            if (checked) {\n\t                var radioNames = _.uniq(\n\t                    _.map($radioChildren, function(item /*, index*/ ) {\n\t                        return $(item).attr('name')\n\t                    })\n\t                )\n\t                _.each(radioNames, function(name /*, index*/ ) {\n\t                    if (!name) return\n\t                    var $radioSameNameChildren = $radioChildren.filter('[name=\"' + name + '\"]')\n\t                    if (!$radioSameNameChildren.length) return\n\t                    var radioSameNameChildrenStates = _.map($radioSameNameChildren, function(item /*, index*/ ) {\n\t                        return $(item).prop('checked')\n\t                    })\n\t                    if (_.indexOf(radioSameNameChildrenStates, checked) !== -1) return\n\t                    else $radioSameNameChildren.eq(0).prop('checked', checked)\n\t                })\n\t            }\n\t\n\t            // $children.not(':disabled').prop('checked', checked)\n\t\n\t            _.each($children, function(item /*, index*/ ) {\n\t                _children($(item), $container)\n\t            })\n\t        }\n\t\n\t        function _siblings($target, $container) {\n\t            if (!$target.is(':radio')) return\n\t\n\t            var name = $target.attr('name')\n\t            var siblings = $container.find('[name=\"' + name + '\"]').not($target)\n\t            _.each(siblings, function(item /*, index*/ ) {\n\t                var $item = $(item)\n\t                _parent($item, $container)\n\t                _children($item, $container)\n\t            })\n\t        }\n\t\n\t        // function _indeterminate($container) {\n\t        //     var $all = $container.find(\n\t        //         '[' + ATTR_NAME + '],' +\n\t        //         '[' + ATTR_PARENT_NAME + ']'\n\t        //     )\n\t        //     var $dink = $(\n\t        //         _.filter($all, function(item /*, index*/ ) {\n\t        //             var $item = $(item)\n\t        //             var name = $item.attr(ATTR_NAME)\n\t        //             var $children = $container.find(\n\t        //                 _.template(ATTR_PARENT_NAME_VALUE)({\n\t        //                     name: name\n\t        //                 })\n\t        //             )\n\t        //             return !$children.length\n\t        //         })\n\t        //     )\n\t        //     _.each($dink, function(item /*, index*/ ) {\n\t        //         _parent($(item), $container)\n\t        //     })\n\t        // }\n\t\n\t        return linkage\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** components/table/linkage.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 3584a03505c230c8c71b\n **/","module.exports = require('./linkage')\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/table/linkage/index.js\n ** module id = 0\n ** module chunks = 0\n **/","/* global define, console  */\n/*\n    TODO\n        \n */\ndefine(\n    [\n        'jquery', 'underscore'\n    ],\n    function(\n        $, _\n    ) {\n\n        var PREFIX = 'data-linkage-'\n        var ATTR_NAME = PREFIX + 'name'\n        var ATTR_PARENT_NAME = PREFIX + 'parent-name'\n        var ATTR_NAME_VALUE = '[' + ATTR_NAME + '=\"<%= name %>\"]'\n        var ATTR_PARENT_NAME_VALUE = '[' + ATTR_PARENT_NAME + '=\"<%= name %>\"]'\n\n        function linkage(container, callback) {\n            var $container = $(container)\n            var selector = '[' + ATTR_NAME + '],[' + ATTR_PARENT_NAME + ']'\n\n            _valid($container, selector)\n\n            $(container).on('change.linkage', selector, function(event) {\n                if (event.target !== event.currentTarget) return\n                var $currentTarget = $(event.currentTarget)\n                _parent($currentTarget, $container)\n                _children($currentTarget, $container)\n                _siblings($currentTarget, $container)\n\n                // _indeterminate($container)\n\n                if (callback) callback(event, linkage.val(container), event.currentTarget)\n            })\n\n            // _indeterminate($container)\n\n            return linkage\n        }\n\n        linkage.off = function(container) {\n            var $container = $(container)\n            var selector = '[' + ATTR_NAME + '],[' + ATTR_PARENT_NAME + ']'\n            $container.off('click.linkage', selector)\n\n            return linkage\n        }\n\n        linkage.val = function(container, values) {\n            var $container = $(container)\n\n            // linkage.val(container, values)\n            if (values) {\n                var checkboxs = $container.find('input:checkbox, input:radio')\n                    .not(':disabled')\n                    .prop('checked', false)\n                _.each(values, function(item /*, index*/ ) {\n                    var $target = checkboxs.filter('[value=\"' + item + '\"]').prop('checked', true)\n                    _.each($target, function(item /*, index*/ ) {\n                        _parent($(item), $container)\n                        _children($(item), $container)\n                    })\n                })\n                return linkage\n            }\n\n            // linkage.val(container)\n            values = []\n            var checked = $container.find('input:checkbox:checked, input:radio:checked')\n            _.each(checked, function(item /*, index*/ ) {\n                var value = $(item).attr('value')\n                if (value !== undefined && value !== '') values.push(value)\n            })\n            return values\n        }\n\n        function _valid($container, selector) {\n            var $all = $container.find(selector)\n            _.each($all, function(item /*, index*/ ) {\n                var $item = $(item)\n                var name = $item.attr(ATTR_NAME)\n                var parentName = $item.attr(ATTR_PARENT_NAME)\n                if (name === parentName) {\n                    console.warn(\n                        new Error(\n                            _.template(\n                                '<%= a %> and <%= b %> have save value \"<%= value %>\", may cause the Linkage to recursive search. You should avoid this kind of code.'\n                            )({\n                                a: ATTR_NAME,\n                                b: ATTR_PARENT_NAME,\n                                value: name\n                            })\n                        ).stack\n                    )\n                    console.warn(item)\n                }\n            })\n        }\n\n        function _parent($target, $container) {\n            var name = $target.attr(ATTR_NAME)\n            var parentName = $target.attr(ATTR_PARENT_NAME)\n\n            if (!parentName) return\n            if (name === parentName) return\n\n            var $parent = $container.find(\n                _.template(ATTR_NAME_VALUE)({\n                    name: parentName\n                })\n            )\n            if (!$parent.length) return\n\n            var $siblings = $container.find(\n                _.template(ATTR_PARENT_NAME_VALUE)({\n                    name: parentName\n                })\n            )\n            if (!$siblings.length) return\n\n            // 复选框\n            var $checkboxSiblings = $siblings.filter(':checkbox')\n            var checkboxSiblingsStates = []\n            _.each($checkboxSiblings, function(item /*, index*/ ) {\n                checkboxSiblingsStates.push(\n                    item.indeterminate ? false : item.checked\n                )\n            })\n\n            // 复选框 半选\n            var $indeterminateSiblings = $(\n                _.filter($checkboxSiblings, function(item /*, index*/ ) {\n                    return item.indeterminate\n                })\n            )\n\n            // 单选框\n            var $radioSiblings = $siblings.filter(':radio')\n            var radioSiblingsNames = _.uniq(\n                _.map($radioSiblings, function(item /*, index*/ ) {\n                    return $(item).attr('name')\n                })\n            )\n            var radioSiblingsStates = []\n            _.each(radioSiblingsNames, function(name /*, index*/ ) {\n                if (!name) return\n                radioSiblingsStates.push(!!\n                    $radioSiblings.filter('[name=\"' + name + '\"]:checked').length\n                )\n            })\n\n\n            var siblingsStates = _.uniq(\n                checkboxSiblingsStates.concat(radioSiblingsStates)\n            )\n            $parent\n                .prop(\n                    'indeterminate',\n                    $indeterminateSiblings.length ? true :\n                    siblingsStates.length === 2 // [ true, false ]\n                )\n                .prop(\n                    'checked',\n                    $indeterminateSiblings.length ? false :\n                    siblingsStates.length === 1 && siblingsStates[0]\n                )\n\n            _parent($parent, $container)\n        }\n\n        function _children($target, $container) {\n            var name = $target.attr(ATTR_NAME)\n            var parentName = $target.attr(ATTR_PARENT_NAME)\n            var checked = $target.prop('checked')\n\n            if (!name) return\n            if (name === parentName) return\n\n            var $children = $container.find(\n                _.template(ATTR_PARENT_NAME_VALUE)({\n                    name: name\n                })\n            )\n            if (!$children.length) return\n\n            var $enabledChildren = $children.not(':disabled')\n            if (!$enabledChildren.length) return\n\n            var $checkboxChildren = $enabledChildren.filter(':checkbox')\n            $checkboxChildren.prop('checked', checked)\n\n            var $radioChildren = $enabledChildren.filter(':radio')\n            if (!checked) $radioChildren.prop('checked', checked)\n\n            if (checked) {\n                var radioNames = _.uniq(\n                    _.map($radioChildren, function(item /*, index*/ ) {\n                        return $(item).attr('name')\n                    })\n                )\n                _.each(radioNames, function(name /*, index*/ ) {\n                    if (!name) return\n                    var $radioSameNameChildren = $radioChildren.filter('[name=\"' + name + '\"]')\n                    if (!$radioSameNameChildren.length) return\n                    var radioSameNameChildrenStates = _.map($radioSameNameChildren, function(item /*, index*/ ) {\n                        return $(item).prop('checked')\n                    })\n                    if (_.indexOf(radioSameNameChildrenStates, checked) !== -1) return\n                    else $radioSameNameChildren.eq(0).prop('checked', checked)\n                })\n            }\n\n            // $children.not(':disabled').prop('checked', checked)\n\n            _.each($children, function(item /*, index*/ ) {\n                _children($(item), $container)\n            })\n        }\n\n        function _siblings($target, $container) {\n            if (!$target.is(':radio')) return\n\n            var name = $target.attr('name')\n            var siblings = $container.find('[name=\"' + name + '\"]').not($target)\n            _.each(siblings, function(item /*, index*/ ) {\n                var $item = $(item)\n                _parent($item, $container)\n                _children($item, $container)\n            })\n        }\n\n        // function _indeterminate($container) {\n        //     var $all = $container.find(\n        //         '[' + ATTR_NAME + '],' +\n        //         '[' + ATTR_PARENT_NAME + ']'\n        //     )\n        //     var $dink = $(\n        //         _.filter($all, function(item /*, index*/ ) {\n        //             var $item = $(item)\n        //             var name = $item.attr(ATTR_NAME)\n        //             var $children = $container.find(\n        //                 _.template(ATTR_PARENT_NAME_VALUE)({\n        //                     name: name\n        //                 })\n        //             )\n        //             return !$children.length\n        //         })\n        //     )\n        //     _.each($dink, function(item /*, index*/ ) {\n        //         _parent($(item), $container)\n        //     })\n        // }\n\n        return linkage\n    }\n)\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/table/linkage/linkage.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 3\n ** module chunks = 0\n **/"],"sourceRoot":""}
{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///components/taginput.js","webpack:///webpack/bootstrap d04860ca60bfe41cf142","webpack:///./src/taginput/index.js","webpack:///./src/taginput/taginput.js","webpack:///external \"jquery\"","webpack:///external \"underscore\"","webpack:///external \"brix/loader\"","webpack:///external \"components/base\"","webpack:///external \"brix/event\"","webpack:///./src/taginput/taginput.tpl.js","webpack:///./src/taginput/taginput.item.tpl.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_2__","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","__WEBPACK_EXTERNAL_MODULE_5__","__WEBPACK_EXTERNAL_MODULE_6__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","$","_","Loader","Brix","EventManager","template","itemTemplate","TagInput","NAMESPACE","CLASS_ITEM","CLASS_ITEM_NAME","INPUT_MIN_WIDTH","STATE","PENDING","ACTIVE","INACTIVE","extend","prototype","options","placeholder","data","limit","same","suggest","init","render","that","defer","Deferred","$element","element","hide","$manager","html","$relatedElement","insertAfter","$input","find","attr","on","triggerHandler","boot","query","val","_beautify","delegate","event","value","trigger","add","resolve","type","clientId","_state","document","body","off","target","contains","closest","length","Event","indexOf","push","join","itemHTML","insertBefore","_fixInput","delete","deleted","undefined","remove","item","text","without","preventDefault","items","matched","filter","show","focus","each","_focus","_active","currentTarget","toggleClass","_selection","which","addClass","css","line-height","min-height","height","width","position","left","destroy","undelegate","apply"],"mappings":"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","file":"components/taginput.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"underscore\"), require(\"brix/loader\"), require(\"components/base\"), require(\"brix/event\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\", \"underscore\", \"brix/loader\", \"components/base\", \"brix/event\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"components/taginput\"] = factory(require(\"jquery\"), require(\"underscore\"), require(\"brix/loader\"), require(\"components/base\"), require(\"brix/event\"));\n\telse\n\t\troot[\"components/taginput\"] = factory(root[\"jquery\"], root[\"underscore\"], root[\"brix/loader\"], root[\"components/base\"], root[\"brix/event\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"jquery\"), require(\"underscore\"), require(\"brix/loader\"), require(\"components/base\"), require(\"brix/event\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"jquery\", \"underscore\", \"brix/loader\", \"components/base\", \"brix/event\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"components/taginput\"] = factory(require(\"jquery\"), require(\"underscore\"), require(\"brix/loader\"), require(\"components/base\"), require(\"brix/event\"));\n\telse\n\t\troot[\"components/taginput\"] = factory(root[\"jquery\"], root[\"underscore\"], root[\"brix/loader\"], root[\"components/base\"], root[\"brix/event\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tmodule.exports = __webpack_require__(1)\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/* global define, document, console */\n\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [\n\t        __webpack_require__(2), __webpack_require__(3),\n\t        __webpack_require__(4), __webpack_require__(5), __webpack_require__(6),\n\t        __webpack_require__(7),\n\t        __webpack_require__(8)\n\t    ], __WEBPACK_AMD_DEFINE_RESULT__ = function(\n\t        $, _,\n\t        Loader, Brix, EventManager,\n\t        template,\n\t        itemTemplate\n\t    ) {\n\t        var NAMESPACE = '.taginput'\n\t        var CLASS_ITEM = '.taginput-item'\n\t        var CLASS_ITEM_NAME = '.taginput-item-name'\n\t        var INPUT_MIN_WIDTH = 20\n\t        var STATE = {\n\t            PENDING: 'pending',\n\t            ACTIVE: 'active',\n\t            INACTIVE: 'inactive'\n\t        }\n\t\n\t        function TagInput() {}\n\t\n\t        _.extend(TagInput.prototype, Brix.prototype, {\n\t            options: {\n\t                placeholder: '',\n\t                data: [],\n\t                limit: 0,\n\t                same: true,\n\t                suggest: true\n\t            },\n\t            init: function() {\n\t                this.options.limit = +this.options.limit\n\t            },\n\t            render: function() {\n\t                var that = this\n\t                var defer = $.Deferred()\n\t                this.$element = $(this.element).hide()\n\t                this.$manager = new EventManager('bx-')\n\t\n\t                var html = _.template(template)(this.options)\n\t                this.$relatedElement = $(html).insertAfter(this.$element)\n\t                this.$input = this.$relatedElement.find('input')\n\t                if (this.options.placeholder) this.$input.attr('placeholder', this.options.placeholder)\n\t                if (!this.options.suggest) this.$input.hide()\n\t\n\t                this.$input\n\t                    .on('focus', function() {\n\t                        that.triggerHandler('focus' + NAMESPACE)\n\t                    })\n\t                    .on('blur', function() {\n\t                        that.triggerHandler('blur' + NAMESPACE)\n\t                    })\n\t\n\t                Loader.boot(this.$relatedElement, function() {\n\t                    that.suggest = Loader.query('components/suggest', that.$relatedElement)[0]\n\t\n\t                    that.val(that.options.data, false)\n\t\n\t                    that._beautify(that.$element, that.$relatedElement)\n\t\n\t                    that.$manager.delegate(that.$element, that)\n\t                    that.$manager.delegate(that.$relatedElement, that)\n\t\n\t                    /* jshint unused:false */\n\t                    that.suggest.on('change.suggest.input', function(event, value) {\n\t                        that.trigger('change.suggest.input', value)\n\t                    })\n\t\n\t                    /* jshint unused:false */\n\t                    that.suggest.on('change.suggest.done', function(event, value) {\n\t                        that.add(value)\n\t                            // that.$input.focus()\n\t                    })\n\t\n\t                    defer.resolve()\n\t                })\n\t\n\t                /*\n\t                    var Loader = require('brix/loader')\n\t                    var trees = Loader.query('components/taginput')\n\t                    trees.on('active.taginput inactive.taginput', function(e){ console.log(e.type, e.namespace, e.target) } )\n\t                 */\n\t                var type = 'click' + NAMESPACE + '_' + this.clientId\n\t                this._state = STATE.INACTIVE\n\t                $(document.body).off(type)\n\t                    .on(type, function(event) {\n\t                        if (event.target === that.element || // 点击组件节点\n\t                            $.contains(that.element, event.target) || // 点击组件子节点\n\t                            event.target === that.$relatedElement[0] || // 点击组件关联节点\n\t                            $.contains(that.$relatedElement[0], event.target) || // 点击组件关联子节点\n\t                            (\n\t                                // 点击不存在节点\n\t                                !$.contains(document.body, event.target) &&\n\t                                $(event.target).closest('.taginput-item-delete').length &&\n\t                                $(event.target).closest('.taginput-item-delete').attr('data-taginput-clientid') == that.clientId\n\t                            )\n\t                        ) {\n\t                            if (that._state === STATE.ACTIVE) return\n\t                            that.trigger(\n\t                                $.Event('active' + NAMESPACE, {\n\t                                    target: event.target\n\t                                })\n\t                            )\n\t                            that._state = STATE.ACTIVE\n\t                            return\n\t                        }\n\t\n\t                        if (that._state === STATE.INACTIVE) return\n\t                        that.trigger(\n\t                            $.Event('inactive' + NAMESPACE, {\n\t                                target: event.target\n\t                            })\n\t                        )\n\t                        that._state = STATE.INACTIVE\n\t                    })\n\t\n\t                // return defer.promise()\n\t            },\n\t            // trigger is for internal usage only\n\t            add: function(value, trigger) {\n\t                this._state = STATE.ACTIVE\n\t\n\t                value += ''\n\t                if (value.length === 0) return\n\t\n\t                // 如果选项 same 为 false，则不允许插入重复的值。\n\t                if (!this.options.same && _.indexOf(this.options.data, value) !== -1) {\n\t                    this.$input.val('')\n\t                    return\n\t                }\n\t\n\t                // 如果选项 limit 不是 0，则值的个数不允许超过它。\n\t                if (this.options.limit && this.options.data.length >= this.options.limit) {\n\t                    return\n\t                }\n\t\n\t                this.options.data.push(value)\n\t                this.$element.val(this.options.data.join(','))\n\t\n\t                var itemHTML = _.template(itemTemplate)({\n\t                    data: value,\n\t                    clientId: this.clientId\n\t                })\n\t                $(itemHTML).insertBefore(this.$input)\n\t\n\t                this.$input.val('')\n\t                this._fixInput()\n\t\n\t                if (trigger !== false) this.trigger('change' + NAMESPACE, [this.options.data, 'add', value])\n\t\n\t                if (this.options.limit && this.options.data.length >= this.options.limit) this.$input.hide()\n\t\n\t                return this\n\t            },\n\t            // trigger is for internal usage only\n\t            delete: function(event, trigger) {\n\t                this._state = STATE.ACTIVE\n\t\n\t                var that = this\n\t                var deleted\n\t\n\t                // delete()\n\t                if (event === undefined) {\n\t                    deleted = this.options.data\n\t                    this.options.data = []\n\t                    this.$element.val(this.options.data.join(','))\n\t                    this.$relatedElement.find(CLASS_ITEM).remove()\n\t\n\t                } else {\n\t                    // delete(event)\n\t                    if (event.type) {\n\t                        var item = $(event.target).closest(CLASS_ITEM)\n\t                        deleted = $(item).find(CLASS_ITEM_NAME).text()\n\t                        this.options.data = _.without(this.options.data, $(item).find(CLASS_ITEM_NAME).text())\n\t                        this.$element.val(this.options.data.join(','))\n\t                        $(event.target).closest(CLASS_ITEM).remove()\n\t                        event.preventDefault()\n\t\n\t                    } else {\n\t                        // delete( value )\n\t                        event += ''\n\t                        var items = this.$relatedElement.find(CLASS_ITEM)\n\t                        var matched = _.filter(items, function(item /*, index*/ ) {\n\t                            var text = $(item).find(CLASS_ITEM_NAME).text()\n\t                            if (text === event) {\n\t                                deleted = text\n\t                                that.options.data = _.without(that.options.data, text)\n\t                                that.$element.val(that.options.data.join(','))\n\t                                return true\n\t                            }\n\t                            return false\n\t                        })\n\t                        $(matched).remove()\n\t                    }\n\t                }\n\t\n\t                this._fixInput()\n\t\n\t                if (trigger !== false) this.trigger('change' + NAMESPACE, [this.options.data, 'delete', deleted])\n\t\n\t                if (this.options.limit && this.options.data.length < this.options.limit) this.$input.show()\n\t\n\t                // delete(event)\n\t                if (event && event.type) {\n\t                    this.$input.focus()\n\t                }\n\t\n\t                return this\n\t            },\n\t            // trigger is for internal usage only\n\t            val: function(value, trigger) {\n\t                // .val()\n\t                if (value === undefined) return this.options.data\n\t\n\t                // .val( value )\n\t                var that = this\n\t\n\t                this.delete(undefined, false)\n\t\n\t                // this.add()\n\t                _.each(value, function(item /*, index*/ ) {\n\t                    that.add(item, false)\n\t                })\n\t\n\t                if (trigger === false) this.trigger('change' + NAMESPACE, [this.options.data])\n\t\n\t                return this\n\t            },\n\t            _focus: function(event) {\n\t                if (event.target === this.$relatedElement[0]) this.$input.focus()\n\t                event.preventDefault()\n\t                this._fixInput()\n\t            },\n\t            _active: function(event) {\n\t                $(event.currentTarget).toggleClass('active')\n\t            },\n\t            _selection: function(event) {\n\t                var label = 'handler ' + event.which + ' ' + event.target.value\n\t                console.group(label)\n\t                console.log('selectionStart    ', event.target.selectionStart)\n\t                console.log('selectionEnd      ', event.target.selectionEnd)\n\t                console.log('selectionDirection', event.target.selectionDirection)\n\t                console.groupEnd(label)\n\t                return this\n\t            },\n\t            _beautify: function($element, $relatedElement) {\n\t                $relatedElement\n\t                    .addClass($element.attr('class'))\n\t                    .css({\n\t                        'line-height': $element.css('line-height'),\n\t                        'min-height': $element.css('height'),\n\t                        height: 'auto'\n\t                    })\n\t                this._fixInput()\n\t                return this\n\t            },\n\t            _fixInput: function() {\n\t                this.$input.width(INPUT_MIN_WIDTH) // \n\t                var width = this.$relatedElement.width() - this.$input.position().left\n\t                this.$input.width(\n\t                    width >= INPUT_MIN_WIDTH ? width : INPUT_MIN_WIDTH\n\t                )\n\t                return this\n\t            },\n\t            destroy: function() {\n\t                this.$manager.undelegate(this.$element)\n\t                this.$manager.undelegate(this.$relatedElement)\n\t\n\t                this.$relatedElement.remove()\n\t\n\t                var type = 'click' + NAMESPACE + '_' + this.clientId\n\t                $(document.body).off(type)\n\t            }\n\t        })\n\t\n\t        return TagInput\n\t    }.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* global define */\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t    return \"<div class=\\\"taginput\\\" bx-click=\\\"_focus\\\">\\n\" +\n\t        \"    <div class=\\\"taginput-placeholder hide <%= data.length ? 'hide' : '' %>\\\"><%= placeholder %></div>\\n\" +\n\t        \"    <input bx-name=\\\"components/suggest\\\" class=\\\"taginput-input\\\" autocomplete=\\\"off\\\">\\n\" +\n\t        \"</div>\"\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_RESULT__;/* global define */\n\t!(__WEBPACK_AMD_DEFINE_RESULT__ = function() {\n\t    return \"<div class=\\\"taginput-item\\\" bx-click=\\\"\\\"><!-- _active -->\\n\" +\n\t        \"    <div class=\\\"taginput-item-name\\\"><%= data %></div>\\n\" +\n\t        \"    <div class=\\\"taginput-item-delete\\\" bx-click=\\\"delete\\\" data-taginput-clientid=\\\"<%= clientId %>\\\">\\n\" +\n\t        \"        <span class=\\\"glyphicon glyphicon-remove\\\"></span>\\n\" +\n\t        \"    </div><!-- &times; -->\\n\" +\n\t        \"</div>\"\n\t}.call(exports, __webpack_require__, exports, module), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__))\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** components/taginput.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap d04860ca60bfe41cf142\n **/","module.exports = require('./taginput')\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/taginput/index.js\n ** module id = 0\n ** module chunks = 0\n **/","/* global define, document, console */\ndefine(\n    [\n        'jquery', 'underscore',\n        'brix/loader', 'components/base', 'brix/event',\n        './taginput.tpl.js',\n        './taginput.item.tpl.js'\n    ],\n    function(\n        $, _,\n        Loader, Brix, EventManager,\n        template,\n        itemTemplate\n    ) {\n        var NAMESPACE = '.taginput'\n        var CLASS_ITEM = '.taginput-item'\n        var CLASS_ITEM_NAME = '.taginput-item-name'\n        var INPUT_MIN_WIDTH = 20\n        var STATE = {\n            PENDING: 'pending',\n            ACTIVE: 'active',\n            INACTIVE: 'inactive'\n        }\n\n        function TagInput() {}\n\n        _.extend(TagInput.prototype, Brix.prototype, {\n            options: {\n                placeholder: '',\n                data: [],\n                limit: 0,\n                same: true,\n                suggest: true\n            },\n            init: function() {\n                this.options.limit = +this.options.limit\n            },\n            render: function() {\n                var that = this\n                var defer = $.Deferred()\n                this.$element = $(this.element).hide()\n                this.$manager = new EventManager('bx-')\n\n                var html = _.template(template)(this.options)\n                this.$relatedElement = $(html).insertAfter(this.$element)\n                this.$input = this.$relatedElement.find('input')\n                if (this.options.placeholder) this.$input.attr('placeholder', this.options.placeholder)\n                if (!this.options.suggest) this.$input.hide()\n\n                this.$input\n                    .on('focus', function() {\n                        that.triggerHandler('focus' + NAMESPACE)\n                    })\n                    .on('blur', function() {\n                        that.triggerHandler('blur' + NAMESPACE)\n                    })\n\n                Loader.boot(this.$relatedElement, function() {\n                    that.suggest = Loader.query('components/suggest', that.$relatedElement)[0]\n\n                    that.val(that.options.data, false)\n\n                    that._beautify(that.$element, that.$relatedElement)\n\n                    that.$manager.delegate(that.$element, that)\n                    that.$manager.delegate(that.$relatedElement, that)\n\n                    /* jshint unused:false */\n                    that.suggest.on('change.suggest.input', function(event, value) {\n                        that.trigger('change.suggest.input', value)\n                    })\n\n                    /* jshint unused:false */\n                    that.suggest.on('change.suggest.done', function(event, value) {\n                        that.add(value)\n                            // that.$input.focus()\n                    })\n\n                    defer.resolve()\n                })\n\n                /*\n                    var Loader = require('brix/loader')\n                    var trees = Loader.query('components/taginput')\n                    trees.on('active.taginput inactive.taginput', function(e){ console.log(e.type, e.namespace, e.target) } )\n                 */\n                var type = 'click' + NAMESPACE + '_' + this.clientId\n                this._state = STATE.INACTIVE\n                $(document.body).off(type)\n                    .on(type, function(event) {\n                        if (event.target === that.element || // 点击组件节点\n                            $.contains(that.element, event.target) || // 点击组件子节点\n                            event.target === that.$relatedElement[0] || // 点击组件关联节点\n                            $.contains(that.$relatedElement[0], event.target) || // 点击组件关联子节点\n                            (\n                                // 点击不存在节点\n                                !$.contains(document.body, event.target) &&\n                                $(event.target).closest('.taginput-item-delete').length &&\n                                $(event.target).closest('.taginput-item-delete').attr('data-taginput-clientid') == that.clientId\n                            )\n                        ) {\n                            if (that._state === STATE.ACTIVE) return\n                            that.trigger(\n                                $.Event('active' + NAMESPACE, {\n                                    target: event.target\n                                })\n                            )\n                            that._state = STATE.ACTIVE\n                            return\n                        }\n\n                        if (that._state === STATE.INACTIVE) return\n                        that.trigger(\n                            $.Event('inactive' + NAMESPACE, {\n                                target: event.target\n                            })\n                        )\n                        that._state = STATE.INACTIVE\n                    })\n\n                // return defer.promise()\n            },\n            // trigger is for internal usage only\n            add: function(value, trigger) {\n                this._state = STATE.ACTIVE\n\n                value += ''\n                if (value.length === 0) return\n\n                // 如果选项 same 为 false，则不允许插入重复的值。\n                if (!this.options.same && _.indexOf(this.options.data, value) !== -1) {\n                    this.$input.val('')\n                    return\n                }\n\n                // 如果选项 limit 不是 0，则值的个数不允许超过它。\n                if (this.options.limit && this.options.data.length >= this.options.limit) {\n                    return\n                }\n\n                this.options.data.push(value)\n                this.$element.val(this.options.data.join(','))\n\n                var itemHTML = _.template(itemTemplate)({\n                    data: value,\n                    clientId: this.clientId\n                })\n                $(itemHTML).insertBefore(this.$input)\n\n                this.$input.val('')\n                this._fixInput()\n\n                if (trigger !== false) this.trigger('change' + NAMESPACE, [this.options.data, 'add', value])\n\n                if (this.options.limit && this.options.data.length >= this.options.limit) this.$input.hide()\n\n                return this\n            },\n            // trigger is for internal usage only\n            delete: function(event, trigger) {\n                this._state = STATE.ACTIVE\n\n                var that = this\n                var deleted\n\n                // delete()\n                if (event === undefined) {\n                    deleted = this.options.data\n                    this.options.data = []\n                    this.$element.val(this.options.data.join(','))\n                    this.$relatedElement.find(CLASS_ITEM).remove()\n\n                } else {\n                    // delete(event)\n                    if (event.type) {\n                        var item = $(event.target).closest(CLASS_ITEM)\n                        deleted = $(item).find(CLASS_ITEM_NAME).text()\n                        this.options.data = _.without(this.options.data, $(item).find(CLASS_ITEM_NAME).text())\n                        this.$element.val(this.options.data.join(','))\n                        $(event.target).closest(CLASS_ITEM).remove()\n                        event.preventDefault()\n\n                    } else {\n                        // delete( value )\n                        event += ''\n                        var items = this.$relatedElement.find(CLASS_ITEM)\n                        var matched = _.filter(items, function(item /*, index*/ ) {\n                            var text = $(item).find(CLASS_ITEM_NAME).text()\n                            if (text === event) {\n                                deleted = text\n                                that.options.data = _.without(that.options.data, text)\n                                that.$element.val(that.options.data.join(','))\n                                return true\n                            }\n                            return false\n                        })\n                        $(matched).remove()\n                    }\n                }\n\n                this._fixInput()\n\n                if (trigger !== false) this.trigger('change' + NAMESPACE, [this.options.data, 'delete', deleted])\n\n                if (this.options.limit && this.options.data.length < this.options.limit) this.$input.show()\n\n                // delete(event)\n                if (event && event.type) {\n                    this.$input.focus()\n                }\n\n                return this\n            },\n            // trigger is for internal usage only\n            val: function(value, trigger) {\n                // .val()\n                if (value === undefined) return this.options.data\n\n                // .val( value )\n                var that = this\n\n                this.delete(undefined, false)\n\n                // this.add()\n                _.each(value, function(item /*, index*/ ) {\n                    that.add(item, false)\n                })\n\n                if (trigger === false) this.trigger('change' + NAMESPACE, [this.options.data])\n\n                return this\n            },\n            _focus: function(event) {\n                if (event.target === this.$relatedElement[0]) this.$input.focus()\n                event.preventDefault()\n                this._fixInput()\n            },\n            _active: function(event) {\n                $(event.currentTarget).toggleClass('active')\n            },\n            _selection: function(event) {\n                var label = 'handler ' + event.which + ' ' + event.target.value\n                console.group(label)\n                console.log('selectionStart    ', event.target.selectionStart)\n                console.log('selectionEnd      ', event.target.selectionEnd)\n                console.log('selectionDirection', event.target.selectionDirection)\n                console.groupEnd(label)\n                return this\n            },\n            _beautify: function($element, $relatedElement) {\n                $relatedElement\n                    .addClass($element.attr('class'))\n                    .css({\n                        'line-height': $element.css('line-height'),\n                        'min-height': $element.css('height'),\n                        height: 'auto'\n                    })\n                this._fixInput()\n                return this\n            },\n            _fixInput: function() {\n                this.$input.width(INPUT_MIN_WIDTH) // \n                var width = this.$relatedElement.width() - this.$input.position().left\n                this.$input.width(\n                    width >= INPUT_MIN_WIDTH ? width : INPUT_MIN_WIDTH\n                )\n                return this\n            },\n            destroy: function() {\n                this.$manager.undelegate(this.$element)\n                this.$manager.undelegate(this.$relatedElement)\n\n                this.$relatedElement.remove()\n\n                var type = 'click' + NAMESPACE + '_' + this.clientId\n                $(document.body).off(type)\n            }\n        })\n\n        return TagInput\n    }\n)\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/taginput/taginput.js\n ** module id = 1\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_2__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jquery\"\n ** module id = 2\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"underscore\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"brix/loader\"\n ** module id = 4\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_5__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"components/base\"\n ** module id = 5\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"brix/event\"\n ** module id = 6\n ** module chunks = 0\n **/","/* global define */\ndefine(function() {\n    return \"<div class=\\\"taginput\\\" bx-click=\\\"_focus\\\">\\n\" +\n        \"    <div class=\\\"taginput-placeholder hide <%= data.length ? 'hide' : '' %>\\\"><%= placeholder %></div>\\n\" +\n        \"    <input bx-name=\\\"components/suggest\\\" class=\\\"taginput-input\\\" autocomplete=\\\"off\\\">\\n\" +\n        \"</div>\"\n})\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/taginput/taginput.tpl.js\n ** module id = 7\n ** module chunks = 0\n **/","/* global define */\ndefine(function() {\n    return \"<div class=\\\"taginput-item\\\" bx-click=\\\"\\\"><!-- _active -->\\n\" +\n        \"    <div class=\\\"taginput-item-name\\\"><%= data %></div>\\n\" +\n        \"    <div class=\\\"taginput-item-delete\\\" bx-click=\\\"delete\\\" data-taginput-clientid=\\\"<%= clientId %>\\\">\\n\" +\n        \"        <span class=\\\"glyphicon glyphicon-remove\\\"></span>\\n\" +\n        \"    </div><!-- &times; -->\\n\" +\n        \"</div>\"\n})\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./src/taginput/taginput.item.tpl.js\n ** module id = 8\n ** module chunks = 0\n **/"],"sourceRoot":""}
define(["jquery","underscore","marked","./marked-extra.js","highlightjs","brix/loader","brix/base","./readme.tpl.js","css!./readme.css"],function(e,t,n,r,i,o,d,a){function l(){}return t.extend(l.prototype,d.prototype,{options:{url:""},render:function(){var d=this;e(this.element).append(a);var l=e.Deferred();this.loadDoc(function(a){o.boot(d.element,function(){var c=o.query("components/spin",d.element);o.destroy(c,function(){e(d.element).find("div.readme").html(n(a,{renderer:r,gfm:!0})),d.trimHTML(d.element),d.trimPredefined(d.element);var c=e(d.element).find("table");t.each(c,function(t){t=e(t),t.hasClass("table")||t.addClass("table table-bordered")}),e(d.element).find("pre code").each(function(e,t){i.highlightBlock(t)}),o.boot(d.element,function(){l.resolve()})})})})},loadDoc:function(t){return e.ajax(this.options.url).done(function(e,n,r){t(e,n,r)})},trimHTML:function(n){var r=e("[bx-name]",n);t.each(r,function(t){var n=o.Util.trimHTML(t),r=e(t).closest(".bs-example");e("<pre>").append(e('<code class="html">').text(n)).appendTo(r)})},trimPredefined:function(n){var r=e("pre",n);t.each(r,function(t){t=e(t);var n,r=t.find(">code");r.length?(n=o.Util.trimPredefined(r[0]),r.text(n)):(n=o.Util.trimPredefined(t[0]),t.text(n))})}}),l});
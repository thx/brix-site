define(["jquery","underscore","components/base","brix/event"],function(t,e,s,i){function n(){}var a="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";return e.extend(n.prototype,s.prototype,{options:{cursor:0,total:3,horizontal:!0,vertical:!1},init:function(){this.$element=t(this.element),this.$element.hasClass("wizard-vertical")&&(this.options.horizontal=!1,this.options.vertical=!0)},render:function(){var t=new i;this.data=this.data||e.extend({},this.options),t.delegate(this.element,this),this.move(void 0,0)},move:function(e,s){if(this.options.horizontal){var i=this.options.cursor,n=this.options.total,o=(i+s)%this.options.total,r=t("ol.wizard-nav li.item",this.element);r.removeClass("active").removeClass("bx-trans-steps-on").eq(o).addClass("active").addClass("bx-trans-steps-on"),o>i&&r.eq(i).addClass("resolved");var d=t(".wizard-cards .wizard-card",this.element).hide(),l=d.eq(i).show(),h=d.eq(o).show(),c=i==o?"":o>i?"out bx-anim-fade-out-left":"out bx-anim-fade-out-right",m=i==o?"":o>i?"bx-anim-fade-in-left":"bx-anim-fade-in-right";l.addClass(c),i!=o&&l.one(a,function(e){t(e.target).removeClass(c).hide()}),h.addClass(m).one(a,function(e){t(e.target).removeClass(m)});var v=t(".wizard-next",this.element),p=t(".wizard-back",this.element);v.html(o===n-2?"完成":"下一步"),v[o===n-1?"hide":"show"](),p[0===o||o===n-1?"hide":"show"](),this.options.cursor=o}return this},next:function(e){return this.options.horizontal&&this.move(e,1),this.options.vertical&&t(e.currentTarget).parents(".wizard-card").removeClass("active").removeClass("bx-trans-steps-on").addClass("resolved").next().addClass("active").addClass("bx-trans-steps-on"),this},back:function(t){this.move(t,-1)},expand:function(e){return this.options.vertical&&t(e.currentTarget).parents(".wizard-card").addClass("active").addClass("bx-trans-steps-on").siblings().removeClass("active").removeClass("bx-trans-steps-on"),this}}),n});